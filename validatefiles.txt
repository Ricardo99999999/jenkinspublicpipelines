pipeline {
  agent any
  stages {
  
    stage('Checking versions') {
      steps {
          script{
            def nodeOutput = bat(script: 'node -v', returnStdout: true).trim()
            def npmOutput  = bat(script: 'npm -v', returnStdout: true).trim()
            
            // Tomar solo la última línea
            def nodeVersion = nodeOutput.readLines().last()
            def npmVersion  = npmOutput.readLines().last()
			
            echo "La version de Node es: ${nodeVersion}"
            echo "La version de NPM es: ${npmVersion}"
            //The same as
            //bat 'node -v'
            //bat 'npm -v'
          }
      }
    }
	
    stage('Cloning GitHub repository') {
      steps {
         // Clone GitHub repository
        git branch: 'master', url: 'https://github.com/Ricardo99999999/validatefiles.git'
      }
    }
	
	stage('Install dependencies') {
      steps {
        bat 'npm install'
      }
    }
	
	stage('Run validate') {
      steps {
        bat 'npm run validate'
      }
    }
  }
}
